doctype html
html
	head
		meta(charset='utf-8')
		meta(content='IE=edge', http-equiv='X-UA-Compatible')
		meta(content='width=device-width, initial-scale=1', name='viewport')
		title= 'Thacher-Graphics | ' + title
		link(href='/css/bootstrap.min.css', rel='stylesheet')
		link(href='/css/style.css', rel='stylesheet')
		<!--[if lt IE 9 ]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		script(src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js')
		script(src='/js/bootstrap.min.js')
		script(src='/js/helper-functions.js')
		script(type='text/javascript').
			function resetPass() {
				$('#passModal').modal({
					keyboard: false,
					backdrop: 'static'
				});

				$('#confirmReset').click(function() {
					$.get('\/change');
					window.location = window.location.origin + "/logout"
				});
			}
	body
		nav.navbar.navbar-default.navbar-static.navbar-inverse.navbar-fixed-top(role='navigation')
			.container-fluid
				.navbar-header
					button.navbar-toggle(type='button', data-toggle='collapse', data-target='#navbar-collapse')
						span.sr-only Toggle navigation
						span.icon-bar
						span.icon-bar
						span.icon-bar
					a.navbar-brand(href='/') Thacher-Graphics
				if user
					#navbar-collapse.collapse.navbar-collapse
						ul.nav.navbar-nav
							li.dropdown
								a.dropdown-toggle(href='#', data-toggle='dropdown')
									| Relationship Graphing
									span.caret
								ul.dropdown-menu(role='menu')
									li
										a(href='/') Main Graph
									li
										a(onclick="$('#helpModal').modal();") Graph Help
						if user && user.groups.Mod && false
							ul.nav.navbar-nav
								li.dropdown
									a.dropdown-toggle(href='#', data-toggle='dropdown')
										| Mod Powers
										span.caret
									ul.dropdown-menu(role='menu')
										li
											a(onclick="$('#relModal').modal();") Add Relationship
										li
											a(onclick="$('#delModal').modal();") Request Relationship Deletion
						ul.nav.navbar-nav.navbar-right
							li.dropdown
								a.dropdown-toggle(href='#', data-toggle='dropdown')
									| #{user.givenName} #{user.surname}
									span.caret
								ul.dropdown-menu(role='menu')
									li
										a(id='resetPass' href='javascript:{}' onclick='resetPass()') Reset Password	
									li
										a(href='/logout') Logout
		#passModal(role='dialog').modal.fade
			.modal-dialog
				.modal-content
					.modal-header
						h4.modal-title Password Reset
					.modal-body
						p.
							Are you sure you wish to change your password? If so, click the "Change Password" button below and you will be sent an email with further details.
							If not, click "Cancel".
					.modal-footer
						button(type="button")#confirmReset.btn.btn-danger Change Password
						button(type="button" data-dismiss="modal").btn.btn-default Cancel
		#helpModal(role='dialog').modal.fade
			.modal-dialog
				.modal-content
					.modal-header
						h4.modal-title Map Interactivity Help
					.modal-body
						p The interactive map has a few features which can be accessed with different behaviors from the mouse.
							ul
								li By clicking on a node, you will fade all other nodes except for those that are connected to the original.
								li By shift + clicking a node, you will travel to that person's page.
								li Dragging a node results in the node following the mouse.
								li Zooming is supported via scrolling, and panning is supported as long as you don't start panning on a node.
					.modal-footer
						button(type="button" data-dismiss="modal").btn.btn-default Close
		if user && user.groups.Mod && false
			script(src='/js/jquery.select2.min.js')
			link(href='/css/select2.css', rel='stylesheet')
			link(href='/css/select2-bootstrap.css', rel='stylesheet')
			#relModal(role='dialog').modal.fade
				.modal-dialog
					.modal-content
						.modal-header
							h4.modal-title Add Relationship
						.modal-body
							form(role='form')
								.form-group
									select#select-user.form-control
								.form-group
									select#select-grade.form-control
								.form-group
									select#select-gender.form-control
						.modal-footer
							button(type="button" data-dismiss='modal')#confirmAdd.btn.btn-danger Add Relationship
							button(type="button" data-dismiss="modal").btn.btn-default Cancel
			#delModal(role='dialog').modal.fade
				.modal-dialog
					.modal-content
						.modal-header
							h4.modal-title Request Relationship Deletion
						.modal-body
							form(role='form')
								.form-group
									select#select-rel.form-control
						.modal-footer
							button(type="button" data-dismiss="modal").btn.btn-default Mod Power Not Yet Implemented
							//button(type="button" data-dismiss='modal')#confirmAdd.btn.btn-danger Request Deletion
							//button(type="button" data-dismiss="modal").btn.btn-default Cancel
			script(src='/js/mod-power-select.js')
		block body